#summary Installation / Désinstalation pour Linux

= Sommaire =
<wiki:toc max_depth="3" />

= Introduction =
Cette page présente comment installer et désinstaller le logiciel dans un environnement Linux Ubuntu

= Installation =

Pour installer le logiciel Cultibox sur un environnement Linux Ubuntu, vous avez deux possibilités:
 * L'installer en ligne de commandes
 * L'installer en mode graphique avec le gestionnaire de paquet de votre distribution


== Installation en ligne de commandes ==

Pour installer le logiciel en ligne de commande, il vous suffira de taper la commande suivante dans un terminal (droits administrateurs requis):

{{{
sudo dpkg -i <nom_paquet_cultibox>
}}}

En remplaçant <nom_paquet_cultibox> par le nom du paquet (fichier .deb) que vous avez téléchargé. Par exemple:

{{{
sudo dpkg -i cultibox-ubuntu-amd64_1.1.12.deb
}}}


L'affichage suivant devrait apparaître:

{{{
Selecting previously unselected package cultibox.
(Reading database ... 337234 files and directories currently installed.)
Unpacking cultibox (from cultibox-ubuntu-amd64_1.1.24.deb) ...
Setting up cultibox (1.1.24-ubuntu) ...
   * Configuring/checking Cultibox environment...
Stopping XAMPP for Linux 1.8.1...
XAMPP: XAMPP-Apache is not running.
XAMPP: XAMPP-MySQL is not running.
XAMPP stopped.
Starting XAMPP for Linux 1.8.1...
XAMPP: Starting Apache...
XAMPP: Starting MySQL...
XAMPP for Linux started.
... OK
   * Installing the Cultibox software...
 Adding system startup for /etc/init.d/cultibox ...
   /etc/rc0.d/K20cultibox -> ../init.d/cultibox
   /etc/rc1.d/K20cultibox -> ../init.d/cultibox
   /etc/rc6.d/K20cultibox -> ../init.d/cultibox
   /etc/rc2.d/S20cultibox -> ../init.d/cultibox
   /etc/rc3.d/S20cultibox -> ../init.d/cultibox
   /etc/rc4.d/S20cultibox -> ../init.d/cultibox
   /etc/rc5.d/S20cultibox -> ../init.d/cultibox
Stopping XAMPP for Linux 1.8.1...
XAMPP: Stopping Apache...
XAMPP: Stopping MySQL...
XAMPP stopped.
Starting XAMPP for Linux 1.8.1...
XAMPP: Starting Apache...
XAMPP: Starting MySQL...
XAMPP for Linux started.
... OK
Processing triggers for bamfdaemon ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils ...
Processing triggers for gnome-menus ...
}}}


 
*Note:* il existe une version 32bits (nommée i386) et une version 64bits (nommée amd64). Il vous faudra choisir la version en fonction de votre environnement Linux Ubuntu. Si cette dernière est installée en version 64bits, il vous faudra récupérer le fichier amd64, sinon prenez la version i386.
Pour vérifier cela sur votre système, tapez simplement la commande suivante dans un terminal:

{{{
uname -a
}}}

Qui devrait produire l'affichage suivant:
{{{
Linux XXXXX 3.5.0-26-generic #42-Ubuntu SMP Fri Mar 8 23:18:20 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
}}}
On voit apparaitre le tag X86_64 en fin de ligne qui correspond à un système 64bits. Sinon le tag X86 devrait apparaitre.



== Installation en mode graphique ==

Pour installer votre logiciel en utilisant le gestionnaire de paquets de votre distribution:

 * Double cliquez sur le paquet (fichier .deb) que vous venez de télécharger, l'interface se lancera automatiquement
 * Cliquez sur le bouton "Installer":

http://cultibox.googlecode.com/svn/wiki/img/install_linux1.png


 * Le gestionnaire vous demandera alors de vous authentifier:

http://cultibox.googlecode.com/svn/wiki/img/install_linux2.png


 * Laisser l'installation se poursuivre et le logiciel Cultibox sera alors disponible


= Lancement de l'interface Cultibox =
Pour accéder au logiciel cultibox, vous avez deux possibilités:

 * Ouvrir un navigateur Web (Firefox, Chrome, IE) et visitez la page suivante: http://localhost:6891/cultibox/
 * Ouvrir le logiciel grâce au raccourci dans les applications Linux Ubuntu. Pour cela ouvrez le gestionnaire des programmes (le "Dash") et tapez simplement cultibox dans la recherche pour le voir apparaite. Il vous suffira de cliquer dessus pour lancer l'interface:

http://cultibox.googlecode.com/svn/wiki/img/install_linux3.png

= Mise à jour =

Pour mettre à jour le logiciel Cultibox, il vous suffit de suivre la même procédure que pour l'installation du logiciel. L'installateur réalisera les tâches nécessaires tout seul.
Si vous utilisez la mise à jour en mode ligne de commande, k'affichage suivrant apparaîtra:

{{{
Preparing to replace cultibox 1.1.24-ubuntu (using cultibox-ubuntu-amd64_1.1.24.deb) ...
 * Stopping system cultibox                                                                                                                                                                                  Stopping XAMPP for Linux 1.8.1...
XAMPP: Stopping Apache...
XAMPP: Stopping MySQL...
XAMPP stopped.
    [ OK ]
Unpacking replacement cultibox ...
Setting up cultibox (1.1.24-ubuntu) ...
   * Configuring/checking Cultibox environment...
Stopping XAMPP for Linux 1.8.1...
XAMPP: XAMPP-Apache is not running.
XAMPP: XAMPP-MySQL is not running.
XAMPP stopped.
Starting XAMPP for Linux 1.8.1...
XAMPP: Starting Apache...
XAMPP: Starting MySQL...
XAMPP for Linux started.
... OK
   * A previous version of Cultibox was installed, upgrading your software...
Stopping XAMPP for Linux 1.8.1...
XAMPP: Stopping Apache...
XAMPP: Stopping MySQL...
XAMPP stopped.
Starting XAMPP for Linux 1.8.1...
XAMPP: Starting Apache...
XAMPP: Starting MySQL...
XAMPP for Linux started.
... OK
Processing triggers for bamfdaemon ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils ...
Processing triggers for gnome-menus ...
}}}

*Note:* il est théoriquement possible de repasser à une version antérieure de cette manière, seulement le logiciel Cultibox ne le gère pas. Cela peut donc être fait à vos risques et péril et vous pourrez endommager votre installation actuelle: perte de vos programmes, logs..., erreur dans les bases SQL...

= Désinstallation =

Pour désinstaller le logiciel Cultibox, vous devez exécuter la commande suivante dans un terminal afin de s'assurer qu'aucun fichier de configuration ne restera après la désinstallation:

{{{
sudo dpkg --purge cultibox
}}}


L'affichage suivant devrait apparaitre:

{{{
(Reading database ... 354477 files and directories currently installed.)
Removing cultibox ...
 * Stopping system cultibox  
Stopping XAMPP for Linux 1.8.1...  
XAMPP: Stopping Apache...
XAMPP: Stopping MySQL...
XAMPP stopped.
    [ OK ]
 Removing any system startup links for /etc/init.d/cultibox ...
   /etc/rc0.d/K20cultibox
   /etc/rc1.d/K20cultibox
   /etc/rc2.d/S20cultibox
   /etc/rc3.d/S20cultibox
   /etc/rc4.d/S20cultibox
   /etc/rc5.d/S20cultibox
   /etc/rc6.d/K20cultibox
Purging configuration files for cultibox ...
Processing triggers for bamfdaemon ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for desktop-file-utils ...
Processing triggers for gnome-menus ...
}}}

= Erreur lors de l'installation =

En installant le logiciel sur Linux Ubuntu, le message suivant pourrait apparaitre: "An old version of the Cultibox seems to be remaining in your system [...]"
Ce message signifie qu'une ancienne version Cultibox était installé sur votre système d'exploitation et qu'il n'a pas été supprimé avec la commande citée précédemment et donc qu'il peut rester des anciens fichiers du système Cultibox sur votre environnement. Pour éviter des problèmes à l'installation avec les restes d'une ancienne version, le logiciel lance une vérification de son environnement avant de procéder à l'installation.

Pour remédier à ce problème il vous suffira de lancer la commande suivante (droits administrateurs requis):

{{{
sudo dpkg --purge cultibox
}}}

Puis de relancer l'installation du logiciel (toujours des droits administrateurs requis)  ou d'installer le logiciel en utilisant l'interface graphique de votre gestionnaire de paquets:

{{{
sudo dpkg -i package_cultibox.deb
}}}


= Notes sur l'installation du logiciel Cultibox =

 * Le logiciel cultibox s'installe dans le répertoire /opt/cultibox
 * Un lien symbolique est fait entre ce répertoire et la destination /opt/lampp pour faire fonctionner XAMPP, intégré au logiciel
 * Il est tout à fait possible d'avoir une installation de XAMPP et le logiciel Cultibox fonctionnel ensemble. Pour cela se référer à la FAQ. 
