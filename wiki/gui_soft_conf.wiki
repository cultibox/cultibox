#summary Configuration

= Sommaire =
<wiki:toc max_depth="3" />

= Introduction =
La page de configuration permet de modifier les paramètres du logiciel et de la Cultibox.
Les différents paramètres sont disponibles dans quatre onglets: 
 * *Interface*: pour personnaliser l'interface logicielle de la Cultibox
 * *Cultibox*: pour configurer la Cultibox
 * *Alarme*: pour configurer le système d'alarme présent dans la Cultibox
 * *Carte SD*: pour formater une carte SD et la rendre compatible avec la Cultibox

Pour accéder à la partie configuration, il vous suffit de cliquer sur l'onglet *Configuration* du menu principal:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_menu_conf.png

Il est à noter que vous pouvez passer d'un onglet à un autre sans perdre vos modifications. Le logiciel sauvegarde vos modifications temporairement le temps que vous ayez fini. Cela permet donc de faire plusieurs changements sans appuyer à chaque fois sur le bouton *Enregistrer la configuration*. Cependant, ces changements ne seront réellement enregistré qu'à partir du moment où vous cliquez sur le bouton *Enregistrer la configuration*. Si vous réalisez des changements et que vous changez de page sans avoir au préalable appuyé sur le bouton d'enregistrement, vos modifications seront perdues.

== Configuration de l'interface ==
La section *Interface* permet de modifier les différents paramètres du site web.

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_conf_interface.png

Dans cette section vous pouvez:
 * Définir si vous désirez nous envoyer des informations pour aider au développement, les informations envoyées se basent sur l'utilisation de l'interface Web: la version et le nom de votre navigateur, les versions du logiciel et du firmware de votre Cultibox... ceci afin de définir quelles technologies nous devons privilégier lors de notre développement et de facilement déboguer les erreurs découvertes
 * Activer ou non l'utilisation des options avancées de régulations. En activant cette option vous rendez accessibles de nouvelles configurations pour les prises et leur régulation comme par exemple la régulation d'une prise sur plusieurs capteurs à partir d'une moyenne, d'un minimum ou d'un maximum. Pour plus d'information se reporter à la section [gui_soft_second_regul Régulation secondaire]
 * Afficher les modules de calcul du coût de votre installation. Si vous décidez d'afficher le module de calcul du coût de votre installation, un nouvel onglet sera disponible dans le menu nommé "Coût" et vous permettant de calculer de manière théorique ou réelle le coût de revient de votre installation.

== Configuration de la Cultibox ==

En cliquant sur *Cultibox*, l'onglet change:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_conf_cultibox.png

Dans cette section vous pouvez:
 * Indiquer le nombre de prises de votre système. Vous pouvez aussi modifier le nombre de prise de votre système dans les paramètres de la page programme.
 * Définir à quelle fréquence la Cultibox enregistre les conditions climatiques. Par exemple, si vous indiquez 30 minutes, la Cultibox enregistrera un nouvel échantillon de tous vos capteurs toutes les 30 minutes.
 * Définir la fréquence de mise à jour des prises. Si vous avez d'autres équipements fonctionnant en 433MHz, vous pouvez choisir de ne plus piloter les prises en permanence. Par défaut le réglage est à 1.
 * Définir l'heure de remise à zéro du min/max de tous les capteurs affichés sur l'écran de la Cultibox
 * Changer le décalage interne de la Cultibox. Ce paramètre permet d'ajouter ou de soustraire un certain nombre de seconde tous les jours à 2 heure du matin. Par exemple, si vous indiquez -5, à 2 heure du matin la Cultibox changera son horloge pour qu'il soit 1h59m45s. Pour une aide détaillée, consulter le chapitre suivant.

Pour configurer les prises (le type, la régulation, etc...), reportez vous à la section [gui_soft_plugs Configuration des prises]

=== Comment ajuster le décalage de l'horloge interne ? ===

L'objectif de la première étape est de déterminer le décalage exacte de la Cultibox. Pour avoir une donnée précise, il est conseillé de regarder le décalage sur une semaine au moins.
Dans notre exemple, nous considérons que vous examinez le décalage sur une semaine.
Le premier jour, regardez au même moment l'heure de votre ordinateur (heure de référence) et l'heure de votre Cultibox. Puis calculez la différence entre les deux (cette valeur est négative si l'heure de l'ordinateur est plus grande que l'heure de la Cultibox).
Valeurs pour l'exemple :
 * Heure Ordinateur Jour 1 : 18h49m53s
 * Heure Cultibox Jour 1 : 18h50m08s
 * Différence jour 1 : Heure Cultibox - Heure Ordinateur : 15 secondes
 
Une semaine plus tard (de préférence à la même heure), réalisez la même opération.
Valeurs pour l'exemple :
 * Heure Ordinateur Jour 7 : 18h49m36s
 * Heure Cultibox Jour 7 : 18h51m06s
 * Différence jour 7 : Heure Cultibox - Heure Ordinateur : 1 min et 30 secondes
 
Appliquer la formule suivante (le chiffre 7 dans la division représente le nombre de jour de décalage):
Décalage = (Différence jour 1 - Différence jour 7) / 7
Valeur pour l'exemple : 
 * Décalage : (15s - 1min30s) / 7 : (15s - 90s) / 7 : -10,7
 * Il faut ensuite arrondir, dans notre cas nous entrons la valeur -11secondes dans le logiciel

== Configuration de l'alarme ==

En cliquant sur *Alarme*, l'onglet change:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_conf_alarme.png

L'alarme de la Cultibox peut être configurée dans cette section. Pour plus de détail, reportez vous à la section [gui_soft_conf_alarme Configuration de l'alarme]


== Configuration de la carte SD ==

En cliquant sur *Carte SD*, l'onglet change:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_conf_SD.png

Afin de formater une carte SD pour la rendre compatible Cultibox, vous devez sélectionner la carte dans la liste et cliquer sur le bouton *Formater la carte*. Il est conseillé de conserver la carte SD fourni avec le pack de départ. 
Si vous perdez votre carte, vous pouvez en acheter une. La carte SD doit être d'une capacité de 2Go au maximum (La Cultibox ne reconnaît pas les cartes SD Haute Capacité SDHC) et elle doit être formatée en FAT16. Il est possible d'utiliser une carte SD de plus grande capacité, mais il vous faudra:
 * Créer une partition FAT16
 * Faire en sorte que cette partition ne dépasse pas 2GO
 * Formater la carte


Le formatage d'une carte SD afin de la rendre compatible avec la Cultibox consiste à créer les fichiers nécessaires au bon fonctionnement de votre équipement:
 * Copie des fichiers logs s'ils sont manquant 
 * Copie des fichiers de firmware pour la Cultibox
 * Copie des différents fichiers de configuration nécessaires au fonctionnement de la Cultibox
 * Copie des fichiers supplémentaires: icônes, pages html...

Il est à noter que la copie des fichiers logs ne se fera que si les fichiers n'ont pas la taille requise. Cela signifie que des fichiers logs contenant déjà des logs ne seront pas effacés. Il peut donc vous rester des informations de logs dans vos fichiers provenant d'une ancienne session de culture.

Cette opération peut prendre un certain temps, la patience est de rigueur.
