#summary Régulation secondaire

= Sommaire =
<wiki:toc max_depth="3" />

= Régulation secondaire =
== Introduction ==

La régulation secondaire d'une prise permet d'éteindre ou de mettre en route une prise quand une condition est atteinte.
Par exemple: Un ventilateur est branché sur une prise. La régulation classique permet d'allumer ou d'éteindre la prise en fonction de la température. La régulation secondaire permet de forcer l'allumage ou l'extinction de la prise en fonction de l'humidité. Cela permet, par exemple, de forcer la mise en route du ventilateur si l'humidité devient trop forte.

== Activation de la régulation secondaire ==

Par défaut la régulation secondaire n'est pas activée. Afin de l’activer vous devrez vous rendre dans l'onglet *Configuration* du menu principal:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_menu_conf.png

Puis dans le premier onglet nommé *Interface* vous trouverez une ligne nommée: *Activer la régulation secondaire (Utilisateur expert seulement)*. Il vous suffit de mettre cette ligne à *Oui* et de cliquer sur le bouton *Enregistrer la configuration* pour activer la régulation secondaire:

http://cultibox.googlecode.com/svn/wiki/img/regul_secondaire_activation.png

== Donnée climatique ==
La régulation classique, gère la prise en fonction du type d'élément branché dessus. La régulation secondaire va jouer sur l'autre condition climatique.
Par exemple, vous utilisez un humidificateur. La régulation "classique" va mettre l'équipement en marche pour augmenter le taux d’humidité. La régulation secondaire va donc jouer sur la deuxième donnée climatique: la température.

Pour chaque type d'élément, retrouvez dans le tableau ci-dessous, la donnée climatique gérée par la régulation secondaire.

|| *Type d'élément* || *Capteur utilisé pour la régulation "classique"* || * Capteur utilisé pour la régulation "secondaire"* ||
|| Chauffage || Température || Humidité ||
|| Ventilateur || Température || Humidité ||
|| Humidificateur || Humidité || Température ||
|| Des-humidificateur || Humidité || Température ||
|| Lampe || Aucune || Aucune ||
|| Autre || Aucune || Aucune ||


== Paramétrage de la régulation secondaire ==

Il n'est pas possible de définir un intervalle de temps pour l'activation de la régulation secondaire. A partir du moment ou l'utilisateur l'active, elle restera activée en permanence.
Une fois activée la régulation secondaire est disponible dans l'onglet *Prises* du menu principal:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_menu_plugs.png

Pour configurer la régulation secondaire:
 * Dans l'onglet *Prises*, choisissez le type de votre prise. La régulation secondaire n'est pas disponible pour les types *Lampe* et *Autre*
 * Une fois le type choisi vous verrez apparaître une nouvelle option de configuration nommée *Régulation secondaire (utilisateur expert seulement)*, par défaut définit sur *Arrêt*. Pour activer la régulation secondaire de cette prise, mettre la valeur de ce champ sur *Marche*.
 * Il ne vous reste plus qu'à paramétrer votre régulation avec les nouveaux champs qui s'affichent:
   * *Déclenchement en fonction de*: est défini par défaut en fonction du type de la prise. Un ventilateur ou un chauffage se déclencheront en fonction de l'humidité tandis qu'un humidificateur et un déshumidificateur se déclencheront en fonction de la température
   * *Déclenchement si la mesure est en*: permet de définir si la prise doit se déclencher si on dépasse la valeur ou si l'on est en dessous de la valeur du seuil
   * *Seuil de déclenchement*: la valeur qui définit quand votre prise doit se déclencher 

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_programmation_5.png

= Options avancées de régulation =
== Activation de la modification des options avancées de régulation ==
Par défaut la modification des options avancées de régulation n'est pas activée. Afin de l’activer vous devrez vous rendre dans l'onglet *Configuration* du menu principal:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_menu_conf.png

Puis dans le premier onglet nommé *Interface* vous trouverez une ligne nommée: *Autoriser la modification des options avancées de régulation*. Il vous suffit de mettre cette ligne à *Oui* et de cliquer sur le bouton *Enregistrer la configuration* pour activer les options avancées de régulation.

== Paramétrage des options avancées de régulation  ==
Une fois activée les options avancées de régulation sont disponibles dans l'onglet *Prises* du menu principal:

http://cultibox.googlecode.com/svn/wiki/img/gui_soft_advanced_options_regul.png

Les options avancées vous permettent:
 * De choisir le ou les capteurs qui seront utilisés pour réguler votre environnement
 * De savoir si la régulation doit se faire sur la moyenne des valeurs de plusieurs capteurs, leur minimum ou leur maximum. La régulation secondaire est toujours réalisée à partir de la moyenne des capteurs.

Il est à noter que ces options ne sont visibles qu'à partir du moment ou le type de l'équipement n'est pas définit comme une "lampe" ou un type "autre".


== Impact de la régulation secondaire sur la régulation principale ==
La régulation secondaire est prioritaire sur la régulation principale. Si les conditions définies pour la régulation secondaire sont respectées, alors la régulation secondaire entre en oeuvre et la régulation principale s’arrête.

Il y a un autre impact: dans la zone de transition de la régulation principale entre *consigne - tolérance* et *consigne + tolérance* l'état de la prise dépend de son état précédent. Si la régulation secondaire entre en oeuvre, elle modifie l'état de la prise. Une fois que la régulation secondaire ne fonctionne plus, la régulation principale prend comme dernière état de la prise, l'état appliqué par la régulation secondaire.
