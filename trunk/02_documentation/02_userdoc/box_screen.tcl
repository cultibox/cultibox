package require Img
console show
image create photo screen -width 180 -height 136

# DÃ©finition des caracteres
set chars {
    { 0x00 0x00 0x00 0x00 0x00 }  
    { 0x00 0x00 0x7a 0x00 0x00 }   
    { 0x00 0x70 0x00 0x70 0x00 }   
    { 0x14 0x7f 0x14 0x7f 0x14 }   
    { 0x24 0x52 0x7f 0x52 0x12 }   
    { 0x31 0x32 0x04 0x0b 0x13 }   
    { 0x05 0x22 0x55 0x49 0x36 }   
    { 0x00 0x00 0x60 0x50 0x00 }   
    { 0x00 0x41 0x22 0x64 0x00 }   
    { 0x00 0x64 0x22 0x41 0x00 }   
    { 0x14 0x08 0x3e 0x08 0x14 }   
    { 0x08 0x08 0x3e 0x08 0x08 }   
    { 0x00 0x06 0x05 0x00 0x00 }   
    { 0x04 0x04 0x04 0x04 0x04 }   
    { 0x00 0x00 0x03 0x03 0x00 }   
    { 0x20 0x10 0x08 0x04 0x02 }   
    { 0x3e 0x51 0x49 0x45 0x3e }   
    { 0x00 0x01 0x7f 0x21 0x00 }   
    { 0x31 0x49 0x45 0x43 0x21 }   
    { 0x46 0x69 0x51 0x41 0x42 }   
    { 0x04 0x7f 0x24 0x14 0x0c }   
    { 0x4e 0x51 0x51 0x51 0x72 }   
    { 0x06 0x49 0x49 0x29 0x1e }   
    { 0x60 0x50 0x48 0x47 0x40 }   
    { 0x36 0x49 0x49 0x49 0x36 }   
    { 0x3c 0x4a 0x49 0x49 0x30 }   
    { 0x00 0x00 0x36 0x36 0x00 }   
    { 0x00 0x00 0x36 0x35 0x00 }   
    { 0x00 0x41 0x22 0x14 0x08 }   
    { 0x14 0x14 0x14 0x14 0x14 }   
    { 0x08 0x14 0x22 0x41 0x00 }   
    { 0x30 0x48 0x45 0x40 0x20 }   
    { 0x3e 0x45 0x4d 0x49 0x26 }   
    { 0x3f 0x44 0x44 0x44 0x3f }   
    { 0x36 0x49 0x49 0x49 0x7f }   
    { 0x22 0x41 0x41 0x41 0x3e }   
    { 0x1c 0x22 0x41 0x41 0x7f }   
    { 0x41 0x49 0x49 0x49 0x7f }   
    { 0x40 0x48 0x48 0x48 0x7f }   
    { 0x2f 0x49 0x49 0x41 0x3e }   
    { 0x7f 0x08 0x08 0x08 0x7f }   
    { 0x00 0x41 0x7f 0x41 0x00 }   
    { 0x40 0x7e 0x41 0x01 0x02 }   
    { 0x41 0x22 0x14 0x08 0x7f }   
    { 0x01 0x01 0x01 0x01 0x7f }   
    { 0x7f 0x20 0x18 0x20 0x7f }   
    { 0x7f 0x04 0x08 0x10 0x7f }   
    { 0x3e 0x41 0x41 0x41 0x3e }   
    { 0x30 0x48 0x48 0x48 0x7f }   
    { 0x3d 0x42 0x45 0x41 0x3e }   
    { 0x31 0x4a 0x4c 0x48 0x7f }   
    { 0x46 0x49 0x49 0x49 0x31 }   
    { 0x40 0x40 0x7f 0x40 0x40 }   
    { 0x7e 0x01 0x01 0x01 0x7e }   
    { 0x7c 0x02 0x01 0x02 0x7c }   
    { 0x7e 0x01 0x0e 0x01 0x7e }   
    { 0x63 0x14 0x08 0x14 0x63 }   
    { 0x70 0x08 0x07 0x08 0x70 }   
    { 0x61 0x51 0x49 0x45 0x43 }   
    { 0x00 0x41 0x41 0x7f 0x00 }   
    { 0x55 0x2a 0x55 0x2a 0x55 }   
    { 0x00 0x7f 0x41 0x41 0x00 }   
    { 0x10 0x20 0x40 0x20 0x10 }   
    { 0x01 0x01 0x01 0x01 0x01 }   
    { 0x00 0x10 0x20 0x40 0x00 }   
    { 0x0f 0x15 0x15 0x15 0x02 }   
    { 0x0e 0x11 0x11 0x09 0x7f }   
    { 0x02 0x11 0x11 0x11 0x0e }   
    { 0x7f 0x09 0x11 0x11 0x0e }   
    { 0x0c 0x15 0x15 0x15 0x0e }   
    { 0x20 0x40 0x48 0x3f 0x08 }   
    { 0x3e 0x25 0x25 0x25 0x18 }   
    { 0x0f 0x10 0x10 0x08 0x7f }   
    { 0x00 0x01 0x5f 0x11 0x00 }   
    { 0x00 0x5e 0x11 0x01 0x02 }   
    { 0x00 0x11 0x0a 0x04 0x7f }   
    { 0x00 0x01 0x7f 0x41 0x00 }   
    { 0x0f 0x10 0x0c 0x10 0x1f }   
    { 0x0f 0x10 0x10 0x08 0x1f }   
    { 0x0e 0x11 0x11 0x11 0x0e }   
    { 0x08 0x14 0x14 0x14 0x1f }   
    { 0x1f 0x0c 0x14 0x14 0x08 }   
    { 0x08 0x10 0x10 0x08 0x1f }   
    { 0x02 0x15 0x15 0x15 0x09 }   
    { 0x02 0x01 0x11 0x7e 0x10 }   
    { 0x1f 0x02 0x01 0x01 0x1e }   
    { 0x1c 0x02 0x01 0x02 0x1c }   
    { 0x1e 0x01 0x06 0x01 0x1e }   
    { 0x11 0x0a 0x04 0x0a 0x11 }   
    { 0x1e 0x05 0x05 0x05 0x18 }   
    { 0x11 0x19 0x15 0x13 0x11 }   
    { 0x00 0x18 0x24 0x24 0x18 }
}

set texte {
  {--Parametres--}
  {1. Cultibox}
  {2. Emetteur}
  {3. Capteur}
  {4. Retour}
}

set texte {
  {---Cultibox--}
  {1. Horloge}
  {2. Registre}
  {3. Alarme}
  {4. Prise}
  {5. Retour}
}

set texte {
  {---Emetteur---}
  {1. Parametres}
  {2. Reg. Prises}
  {3. Reg. Autres}
  {4. Retour}
}
set name {lcd_menu_param_emetteur.png}

set texte {
  {--Parametres--}
  {Chip:001}
  {Firmw:001.004}
  {Time :00h10m02}
  {Act.0:00h00m00}
}
set name {lcd_menu_param_emetteur_param.png}

set texte {
  {P01 A004V001}
  {P02 A247V000}
  {P03 A222V001}
  {P04 A219V000}
  {P05 A215V000}
  {P06 A207V000}
}
set name {lcd_menu_param_emetteur_reg_prises.png}

set texte {
  {Reg: 00: 001}
  {Reg: 01: 000}
  {Reg: 02: 000}
  {Reg: 03: 000}
  {Reg: 04: 255}
  {Reg: 05: 255}
}
set name {lcd_menu_param_emetteur_reg_autres.png}

set texte {
  {---Registre---}
  {Contrast:018}
  {Firmw.:002.000}
  {Freq Plug :000}
  {Log Freq :300}
  {Pwr Freq :060}
}
set name {lcd_menu_param_cultibox_reg_1.png}

set texte {
  {---Registre---}
  {RTC Off.:000}
  {Reset Min:0000}
  {Id: 00045}
}
set name {lcd_menu_param_cultibox_reg_2.png}

set texte {
  {---Alarme---}
  {Active: 0}
  {Value: 15.00}
  {Sensor: T}
  {Sens: +}
}
set name {lcd_menu_param_cultibox_alarme.png}

set texte {
  {----Prise-----}
  {1. Prise num 1}
  {2. Prise num 2}
  {3. Prise num 3}
  {4. Prise num 4}
  {5. Prise num 5}
}
set name {lcd_menu_param_cultibox_prise.png}

set texte {
  {--Parametres--}
  {Regul Primaire}
  {Type : N}
  {Sens : +}
  {Tol : 00,00}
}
set name {lcd_menu_param_cultibox_prise_1.png}

set texte {
  {--Parametres--}
  {Regul Secondai}
  {Type : N}
  {Sens : +}
  {Etat Actif: 0}
  {Valeur:00,00}
}
set name {lcd_menu_param_cultibox_prise_2.png}


set texte {
  {--Parametres--}
  {Tol. : 00,00}
  {Calcul Valeur}
  {Type : Moyenne}
  {Capteur 1: OUI}
  {Capteur 2: OUI}
}
set name {lcd_menu_param_cultibox_prise_3.png}

set texte {
  {--Parametres--}
  {Capteur 3: OUI}
  {Capteur 4: OUI}
  {Val Pri:00,00}
  {Val Sec:00,00}
  {Seuil:00,00}
}
set name {lcd_menu_param_cultibox_prise_4.png}

set texte {
  {--Parametres--}
  {Val Reg:00,00}
  {Etat Prise:000}
  {Debug:000}
}
set name {lcd_menu_param_cultibox_prise_5.png}

# Mise en place du fond
for {set i 0} {$i < 180} {incr i} {
	for {set j 0} {$j < 136} {incr j} {
	    screen put #808080 -to $i $j
	}
}

# Mise en place du cadre
for {set i 4} {$i < 176} {incr i} {
	for {set j 4} {$j < 132} {incr j} {
	    screen put #CCFFCC -to $i $j
	}
}


# Ecriture du texte
set y 0
set x 4
foreach line $texte {
	for {set c 0} {$c < [string length $line]} {incr c} {
		scan [string index $line $c] %c ascii
		set pixels [lindex $chars [expr $ascii - 32]]
		foreach pixel [lreverse $pixels] {
			puts $pixel
			for {set l 0} {$l < 8} {incr l} {
				if {[expr int(pow(2,$l)) & $pixel] != 0} {
					screen put #808080 -to [expr 2 * $x + 0] [expr 2 * ($y * 10 + 8 - $l + 2) + 0]
					screen put #808080 -to [expr 2 * $x + 1] [expr 2 * ($y * 10 + 8 - $l + 2) + 0]
					screen put #808080 -to [expr 2 * $x + 0] [expr 2 * ($y * 10 + 8 - $l + 2) + 1]
					screen put #808080 -to [expr 2 * $x + 1] [expr 2 * ($y * 10 + 8 - $l + 2) + 1]
				}
			}
			incr x
		}
		incr x
	}
	incr y
	set x 4
}

screen write [file join d:/ $name] -format PNG

exit