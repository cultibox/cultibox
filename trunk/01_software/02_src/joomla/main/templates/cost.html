<?php if((isset($pop_up))&&("$pop_up"!="False")&&(isset($pop_up_message))&&(!empty($pop_up_message))) { ?>
    <div class="pop_up_message">
            <?php echo str_replace("\\n\\n","<br /><br />","$pop_up_message"); ?>
    </div>
<?php } else if((isset($pop_up))&&("$pop_up"!="False")&&(isset($pop_up_error_message))&&(!empty($pop_up_error_message))) { ?>
       <div class="pop_up_error">
            <?php echo str_replace("\\n\\n","<br /><br />","$pop_up_error_message"); ?>
       </div>
<?php } ?>



<?php if((isset($main_info))&&(!empty($main_info))&&(count($main_info)>0)) { ?>
<div class="info">
<ul>
        <?php foreach($main_info as $inf) { 
            echo $inf."<br /><br />";            
        } ?>
</ul>
</div>
<?php } ?>
<?php if((isset($main_error))&&(!empty($main_error))&&(count($main_error)>0)) { ?>
<div class="error">
<ul>
        <?php foreach($main_error as $err) { 
            echo $err."<br /><br />";            
        } ?>
</ul>
</div>
<?php } ?>
<br /><br />


<?php switch($_SESSION['LANG']) {
        case 'fr_FR': 
                echo '<script type="text/javascript" src="main/libs/js/jquery.ui.datepicker-fr.js"></script>'; 
                break;
        case 'it_IT':
                echo '<script type="text/javascript" src="main/libs/js/jquery.ui.datepicker-it.js"></script>';
                break;
        case 'de_DE':
                echo '<script type="text/javascript" src="main/libs/js/jquery.ui.datepicker-de.js"></script>';
                break;
        case 'es_ES':
                echo '<script type="text/javascript" src="main/libs/js/jquery.ui.datepicker-es.js"></script>';
                break;
        }
?>

<script type="text/javascript">
$(function() {
   $("#datepicker_start").datepicker({ 
dateFormat: "yy-mm-dd",
showButtonPanel: true,
showOn: "both",
buttonImage: "../../main/libs/img/datepicker.png",
buttonImageOnly: 'true',
<?php echo "buttonText: '".__('TIMEPICKER_BUTTON_TEXT_LOG')."',"; ?>
}).val()
});
</script>

<script type="text/javascript">
$(function() {
   $("#datepicker_end").datepicker({ 
dateFormat: "yy-mm-dd",
showButtonPanel: true,
showOn: "both",
buttonImage: "../../main/libs/img/datepicker.png",
buttonImageOnly: 'true',
<?php echo "buttonText: '".__('TIMEPICKER_BUTTON_TEXT_LOG')."',"; ?>
}).val()
});
</script>

<script type="text/javascript">
$(function () {
   var chart;
   $(document).ready(function() {
    chart = new Highcharts.Chart({
      chart: {
         backgroundColor: '#F7F7F9',
         renderTo: 'container',
         borderWidth: 3,
         borderColor: '#959891',
         borderRadius: 20,
         spacingRight: 20,
         type: 'column'
      },
      title: {
         useHTML: true,
         text: <?php if(strcmp("$startday","$endday")!=0) { echo "'".__('COST_PRICE_COMPUTE_GRAPH')." ".__('COST_PRICE_TIME')." ".$startday." ".__('COST_PRICE_TO')." ".$endday."'"; } else {
                    echo "'".__('COST_PRICE_COMPUTE_GRAPH')." ".__('COST_PRICE_FOR_DAY')." ".$startday."'"; } ?>
      },
      subtitle: {
         text: ''
      },
      lang: {
            useHTML: true,
            printChart: <?php echo "'".__('PRINT_HIGHCHART')."',"; ?>
            exportButtonTitle: <?php echo "'".__('EXPORT_HIGHCHART')."',"; ?>
            downloadPNG : <?php echo "'".__('EXPORT_PNG')."',"; ?>
            downloadJPEG : <?php echo "'".__('EXPORT_JPEG')."',"; ?>
            downloadPDF : <?php echo "'".__('EXPORT_PDF')."',"; ?>
            downloadSVG : <?php echo "'".__('EXPORT_SVG')."',"; ?>
            resetZoom : <?php echo "'".__('RESET_ZOOM')."',"; ?>
            resetZoomTitle : <?php echo "'".__('RESET_ZOOM_TITLE')."'"; ?>,
            contextButtonTitle: <?php echo "'".__('CONTEXT_MENU')."'"; ?>
      },
      xAxis: {
         useHTML: true,
         categories: [
            '<?php echo __('REAL_PRICE'); ?>',
            '<?php echo __('THEORICAL_PRICE'); ?>'
         ]
      },
      yAxis: {
         min: 0,
         alternateGridColor: '#FDFFD5',
         title: {
            useHTML: true,
            text: '<?php echo __('INSTALLATION_PRICE'); ?>'
         }
      },
      credits: {
            enabled: false
      },
      tooltip: {
         useHTML: true,
         formatter: function() {
            return ''+ this.y +'<?php if(strcmp("$lang","en_GB")!=0) { echo "€"; } else { echo "£"; } ?>';
         }
      },
      legend: {
        useHTML: true
      },
      plotOptions: {
         column: {
            pointPadding: 0.2,
            borderWidth: 0
         }
      },
        series: [
        <?php foreach($data_price as $data) { ?>
         {
                name: <?php echo "'".html_entity_decode($data['title'])."'," ?>
                color: <?php echo "'".$data['color']."'"; ?>,
                data: [<?php echo $data['real']; ?>,<?php echo $data['theorical']; ?>]
                },
         <?php } ?> 
      ]
   });
});
});
</script>

<label class="title_conf"><?php echo __('COST_PRICE_COMPUTE'); ?>:</label>
<br /><br />
<form action="<?php echo($_SERVER['PHP_SELF']); ?>#anchor-cost" method="post">

<table class="table_width">
   <tr>
      <td class="cost-marge"></td>
      <td class="cost-title"><?php echo __('SELECT_START_DAY'); ?>:<img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_COST_START_TIME'); ?>" /></td>
      <td class="cost-field"><input id="datepicker_start" name="startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"></td>
      <td><?php if((isset($error['startday']))&&(!empty($error['startday']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['startday']."</div>"; ?><?php if((isset($error['interval']))&&(!empty($error['interval']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['interval']."</div>"; ?></td>
   </tr>
   <tr>
      <td></td>
      <td><?php echo __('SELECT_END_DAY'); ?>:<img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_COST_STOP_TIME'); ?>" /></td>
      <td><input id="datepicker_end" name="endday" type="text" class="whitefield" size="10" value="<?php echo $endday; ?>"></td>
      <td><?php if((isset($error['endday']))&&(!empty($error['endday']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['endday']."</div>"; ?></td>
   </tr>
   <tr>
      <td></td>
      <td><?php echo __('SELECT_PRICE_PLUG'); ?>:</td>
      <td><select name="select_plug">
            <option value="all"><?php echo __('PRICE_ALL_PLUG'); ?></option>
            <option value="distinct_all" <?php if(strcmp($select_plug,"distinct_all")==0) { echo "selected"; } ?>><?php echo __('PRICE_DISTINCT_ALL_PLUG'); ?></option>
            <?php for($plugs=1;$plugs<=$nb_plugs;$plugs++) {  ; ?>
               <option value="<?php echo $plugs; ?>" <?php if(strcmp($select_plug,$plugs)==0) echo "selected"; ?>><?php echo __('PRICE_FOR_PLUG').": ".$plugs_infos[$plugs-1]["PLUG_NAME"]; ?></option>
            <?php } ?>
         </select></td>
     <td></td>
   </tr>
   <tr>
      <td></td>
      <td><?php echo __('CONFIGURE_COST_TYPE'); ?>:<img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_COST_TYPE'); ?>" /></td>
      <td>
            <select name="cost_type" onChange="getCostType(this.selectedIndex);" onLoad="getCostType(this.selectedIndex);">
               <option value="standard" <?php if(strcmp($cost_type,"standard")==0) echo "selected"; ?>><?php echo __('COST_STANDARD'); ?></option>
               <option value="hpc" <?php if(strcmp($cost_type,"hpc")==0) echo "selected"; ?>><?php echo __('COST_HPC'); ?></option>
            </select>
      </td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td><label id="cost_label_standard" style="<?php if(strcmp($cost_type,'standard')!=0) echo 'display:none'; ?>"><?php echo __('CONFIGURE_COST_PRICE'); ?>:<img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_COST_PRICE'); ?>" /></label><label id="cost_label_hp" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><?php echo __('CONFIGURE_COST_PRICE_HP'); ?>:</label></td>
      <td><label id="cost_input_standard" style="<?php if(strcmp($cost_type,'standard')!=0) echo 'display:none'; ?>">
        <input type="text" size="6" maxlength="6" name="cost_price" value="<?php echo "$cost_price"; ?>" onKeypress="return verifDigit(event);"><?php if(strcmp($cost_type,'standard')==0) { if(strcmp("$lang","en_GB")!=0) { echo "&euro;"; } else { echo "&#163;"; }} ?></label>
        <label id="cost_input_hp" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><input type="text" size="6" maxlength="6" name="cost_price_hp" value="<?php echo "$cost_price_hp"; ?>" onKeypress="return verifDigit(event);"><?php if(strcmp("$lang","en_GB")!=0) { echo "&euro;"; } else { echo "&#163;"; } ?></label>
      </td>
    <td><?php if((isset($error['cost']))&&(!empty($error['cost']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['cost']."</div>"; ?><?php if((isset($error['price_hp']))&&(!empty($error['price_hp']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['price_hp']."</div>"; ?></td>
   </tr>
   <tr>
      <td></td>
      <td><label id="cost_label_hc" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><?php echo __('CONFIGURE_COST_PRICE_HC'); ?>:</label></td>
      <td><label id="cost_input_hc" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><input type="text" size="6" maxlength="6" name="cost_price_hc" value="<?php echo "$cost_price_hc"; ?>" onKeypress="return verifDigit(event);"><?php if(strcmp("$lang","en_GB")!=0) { echo "&euro;"; } else { echo "&#163;"; } ?></label></td>
     <td><?php if((isset($error['price_hc']))&&(!empty($error['price_hc']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['price_hc']."</div>"; ?></td>
   </tr>
   <tr>
      <td></td>
      <td><label id="start_label_hc" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><?php echo __('CONFIGURE_START_HC'); ?></label></td>
      <td>
            <label id="start_value_hc" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><input type="text" maxlength="5" size="5" name="start_hc" id="start_hc" <?php if((isset($start_hc))&&(!empty($start_hc))) { ?> value="<?php echo $start_hc; ?>" <?php } else { ?> value="00:00" <?php } ?> /></label>
      </td>
      <td><?php if((isset($error['start_hc']))&&(!empty($error['start_hc']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['start_hc']."</div>"; ?></td>
   </tr>
    <tr>
      <td></td>
      <td><label id="stop_label_hc" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><?php echo __('CONFIGURE_STOP_HC'); ?></label></td>
      <td>
            <label id="stop_value_hc" style="<?php if(strcmp($cost_type,'hpc')!=0) echo 'display:none'; ?>"><input type="text" maxlength="5" size="5" name="stop_hc" id="stop_hc" <?php if((isset($stop_hc))&&(!empty($stop_hc))) { ?> value="<?php echo $stop_hc; ?>" <?php } else { ?> value="00:00" <?php } ?> /></label>
      </td>
     <td><?php if((isset($error['stop_hc']))&&(!empty($error['stop_hc']))) echo "<div class='error_field'><img src='/cultibox/main/libs/img/arrow_error.png' alt=''>".$error['stop_hc']."</div>"; ?></td>
   </tr>
</table>
<br />
<p class="p_center"><INPUT type="submit" name="view-cost" value=<?php echo __('VIEW'); ?> onKeypress="return verifDigit(event);"></p>
</form>
<hr />
<br />

<label id="anchor-cost"></label>
<table class="table_width">
<tr>
    <td></td><td><img src="main/libs/img/resume.png" alt="" title="<?php echo $resume; ?>" /></td>
</tr>
<tr>
<td><div id="container" style="width: 800px; height: 400px; margin: 0 auto"></div></td><td></td></tr>
</table>
