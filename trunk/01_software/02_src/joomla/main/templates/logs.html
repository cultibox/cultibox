<?php if((isset($pop_up))&&("$pop_up"!="False")&&(isset($pop_up_message))&&(!empty($pop_up_message))) { ?>
   <script>
      alert('<?php echo "$pop_up_message"; ?>');
   </script>
<?php } else if((isset($pop_up))&&("$pop_up"!="False")&&(isset($pop_up_error_message))&&(!empty($pop_up_error_message))) { ?>
   <script>
      alert('<?php echo "$pop_up_error_message"; ?>');
   </script>
<?php } ?>


<?php if((isset($info))&&(!empty($info))) { ?>
   <div class="info">
      <ul>
         <?php echo $info; ?>
      </ul>
   </div>
<?php } ?>

<?php if((!empty($main_error))||(!empty($error))) { ?>
<div class="error">
<ul>
<?php if(!empty($main_error)) { ?>
        <?php echo $main_error; ?>
<?php } ?>
<?php if(!empty($error)) { ?>
        <?php echo $error; ?>
<?php } ?>
</ul>
</div>
<?php } ?>

<?php switch($lang) {

	case 'fr_FR': 
                echo '<script type="text/javascript" src="main/libs/js/jquery.ui.datepicker-fr.js"></script>'; 
		break;
        }
?>

<script>
$(function() {
   $("#datepicker").datepicker({ 
dateFormat: "yy-mm-dd",
showButtonPanel: true,
showOn: "both",
buttonImage: "../main/libs/img/datepicker.png",
buttonImageOnly: 'true',
<?php echo "buttonText: '".__('TIMEPICKER_BUTTON_TEXT_LOG')."',"; ?>
}).val()
});
</script>


<form>
<label class="title_conf"><img src="main/libs/img/arrow.png" alt="" /><?php echo __('SELECT_DISPLAYED_DAY'); ?>:</label>
<INPUT type= "radio" id="select_day" name="type_select" value="day" <?php if(strcmp($type,"days")==0) echo "checked"; ?> onChange="getType(0);" onLoad="getType(0);" ><?php echo __('ONE_DAY'); ?>
<INPUT type= "radio" id="select_month" name="type_select" value="month" <?php if(strcmp($type,"month")==0) echo "checked"; ?> onChange="getType(1);" onLoad="getType(1);" ><?php echo __('ONE_MONTH'); ?>
</form>
<br />
<div id="label_select_day" style="<?php if(strcmp($type,"days")!=0) echo "display:none"; ?>">
<form action="/cultibox/index.php/display-logs" method="post">
<table>
   <tr>
      <td class="log-marge-day"></td>
      <td class="log-marge-day-title"><?php echo __('SELECT_DAY'); ?>:</td>
      <td class="log-marge-day-field"><input id="datepicker" name="startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"></td>
   </tr>
   <tr>
      <td></td>
      <td><?php echo __('SELECT_PROGRAM_PLUG'); ?><img src="main/libs/img/infos.png" alt="" class="info-bulle-css" title="<?php echo __('TOOLTIP_LOG_PROGRAM'); ?>" /></td>
      <td> <select name="select_plug">
            <option value="">---</option>
            <?php for($i=0;$i<$nb_plugs;$i++) { ?>
               <option value="<?php echo $plugs_infos[$i]["id"]; ?>" <?php if(strcmp($select_plug,$plugs_infos[$i]["id"])==0) echo "selected"; ?>><?php echo $plugs_infos[$i]["PLUG_NAME"]; ?></option>
            <?php } ?>
         </select>
      </td>
   </tr>
   <tr>
      <td></td>
      <td><?php echo __('SELECT_POWER_PLUG'); ?><img src="main/libs/img/infos.png" alt="" class="info-bulle-css" title="<?php echo __('TOOLTIP_POWER_LOG'); ?>" /></td>
      <td> <select name="select_power">
            <option value="">---</option>
            <?php for($i=0;$i<$nb_plugs;$i++) { ?>
               <option value="<?php echo $plugs_infos[$i]["id"]; ?>" <?php if(strcmp($select_power,$plugs_infos[$i]["id"])==0) echo "selected"; ?>><?php echo $plugs_infos[$i]["PLUG_NAME"]; ?></option>
            <?php } ?>
               <option value="9990" <?php if(strcmp($select_power,9990)==0) echo "selected"; ?>><?php echo __('SELECT_ALL_PLUGS'); ?></option>
         </select>
      </td>
   </tr>
    <tr>
      <td></td>
      <td><?php echo __('SELECT_SENSOR_NB'); ?></td>
      <td> <select name="select_sensor">
            <?php for($i=1;$i<=$GLOBALS['NB_MAX_SENSOR'];$i++) { ?>
               <option value="<?php echo $i; ?>" <?php if(strcmp($select_sensor,$i)==0) echo "selected"; ?>><?php echo __('SELECT_SENSOR')." ".$i; ?></option>
            <?php } ?>
             <option value="<?php echo 'all'; ?>" <?php if(strcmp($select_sensor,"all")==0) echo "selected"; ?>><?php echo __('ALL_SENSOR'); ?></option> 
         </select>
      </td>
   </tr>
   <tr>
   <td></td>
   <td>
         <p class="p_right"><INPUT type="submit" value=<?php echo __('VIEW'); ?> onKeypress="return verifDigit(event);"></p>
   </td>
   <td></td>
   </tr>
</table>
</form>
</div>
<div id="label_select_month" style="<?php if(strcmp($type,"days")==0) echo "display:none"; ?>">
<form action="/cultibox/index.php/display-logs" method="post">
<table class="table_width">
   <tr>
      <td class="log-marge-month"></td>
      <td ><?php echo __('MONTH_DATE'); ?></td>
      <td >
            <select name="startmonth">
               <option <?php if("$startmonth" == "1") { echo 'selected';} ?> value="01"><?php echo __('MONTH01'); ?></option>
               <option <?php if("$startmonth" == "2") { echo 'selected';} ?> value="02"><?php echo __('MONTH02'); ?></option>
               <option <?php if("$startmonth" == "3") { echo 'selected';} ?> value="03"><?php echo __('MONTH03'); ?></option>
               <option <?php if("$startmonth" == "4") { echo 'selected';} ?> value="04"><?php echo __('MONTH04'); ?></option>
               <option <?php if("$startmonth" == "5") { echo 'selected';} ?> value="05"><?php echo __('MONTH05'); ?></option>
               <option <?php if("$startmonth" == "6") { echo 'selected';} ?> value="06"><?php echo __('MONTH06'); ?></option>
               <option <?php if("$startmonth" == "7") { echo 'selected';} ?> value="07"><?php echo __('MONTH07'); ?></option>
               <option <?php if("$startmonth" == "8") { echo 'selected';} ?> value="08"><?php echo __('MONTH08'); ?></option>
               <option <?php if("$startmonth" == "9") { echo 'selected';} ?> value="09"><?php echo __('MONTH09'); ?></option>
               <option <?php if("$startmonth" == "10") { echo 'selected';} ?> value="10"><?php echo __('MONTH10'); ?></option>
               <option <?php if("$startmonth" == "11") { echo 'selected';} ?> value="11"><?php echo __('MONTH11'); ?></option>
               <option <?php if("$startmonth" == "12") { echo 'selected';} ?> value="12"><?php echo __('MONTH12'); ?></option>
            </select>
            <?php if($GLOBALS['FIRST_LOG_YEAR']==$last_year) {
                  echo '<input type="text" name="startyear" value="'.$last_year.'" size="4" readonly="readonly">';
            }

            if($GLOBALS['FIRST_LOG_YEAR']!=$last_year) {
                 echo '<select name="startyear">';
                 $first=$GLOBALS['FIRST_LOG_YEAR'];
                 for($i=$first;$i<=$last_year;$i++) { ?>
                     <option <?php if("$startyear" == "$i") { echo 'selected';} ?> value="<?php echo $i; ?>"><?php echo $i; ?></option>
                  <?php }
                  echo "</select>";
            } ?>
      </td>
	  <td class="log-marge-month"></td> 
   </tr>
   <tr>
      <td></td>
      <td><?php echo __('SELECT_SENSOR_NB'); ?></td>
      <td> <select name="select_sensor">
            <?php for($i=1;$i<=$GLOBALS['NB_MAX_SENSOR'];$i++) { ?>
               <option value="<?php echo $i; ?>" <?php if(strcmp($select_sensor,$i)==0) echo "selected"; ?>><?php echo __('SELECT_SENSOR')." ".$i; ?></option>
            <?php } ?>
         </select>
      </td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td><p class="p_right"><INPUT type="submit" value=<?php echo __('VIEW'); ?>></p></td>
      <td></td>
	  <td></td>
   </tr>
</table>
</form>
</div>
<hr />


<?php if($check_format) { ?>
<script type="text/javascript">

Highcharts.setOptions({
lang: {
<?php echo "resetZoom : '".__('RESET_ZOOM')."',"; ?>
<?php echo "resetZoomTitle : '".__('RESET_ZOOM_TITLE')."'"; ?>
}
});

$(function () {
   var chart;
   $(document).ready(function() {
      chart = new Highcharts.Chart({
         chart: {
            backgroundColor: '#F7F7F9',
            borderWidth: 3,
            renderTo: 'container',
            zoomType: 'xy',
            spacingRight: 20,
            events: {
               load: function() {
                  <?php if($fake_log) echo "this.renderer.image('http://localhost:".$GLOBALS['SOFT_PORT']."/cultibox/main/libs/img/fake_log_".__('LANG').".png', 80, 55, 143, 57)"; ?>
                  <?php if($fake_log)  echo ".add();"; ?>
               }
            }
         },
         title: {
             text: <?php echo "'".__('HISTO_GRAPH')." (".$legend_date.")*'"; ?>,
         },
         subtitle: {
             text: document.ontouchstart === undefined ?
               <?php echo "'".__('DRAG_PLOT')."'"; ?>:
               <?php echo "'".__('DRAG_PLOT')."'"; ?>
         },
         lang: {
            printButtonTitle: <?php echo "'".__('PRINT_HIGHCHART')."',"; ?>
            exportButtonTitle: <?php echo "'".__('EXPORT_HIGHCHART')."',"; ?>
            downloadPNG : <?php echo "'".__('EXPORT_PNG')."',"; ?>
            downloadJPEG : <?php echo "'".__('EXPORT_JPEG')."',"; ?>
            downloadPDF : <?php echo "'".__('EXPORT_PDF')."',"; ?>
            downloadSVG : <?php echo "'".__('EXPORT_SVG')."',"; ?>
            resetZoom : <?php echo "'".__('RESET_ZOOM')."',"; ?>
            resetZoomTitle : <?php echo "'".__('RESET_ZOOM_TITLE')."'"; ?>
         },
         xAxis: {
            type: 'datetime',
            endOnTick: false,
            showFirstLabel: true,
            <?php if("$type"=="month") { echo "tickInterval: 5 * 24 * 3600 * 1000,"; } ?>
            title: {
               text: <?php echo "'".__("$xlegend")."'"; ?>
            }
         },
         yAxis: [
            {
               title: {
                  text: <?php echo "'".__('YAXIS_LEGEND','highchart')."'"; ?>,
                  style: {
                     color: <?php echo "'".$color_humidity."'"; ?>
                  }
               },
               min: -0.5,
               max: <?php echo "$hygro_axis"; ?>,
               startOnTick: false,
               showFirstLabel: false,
               labels: {
                  formatter: function() {
                     if(this.value<=100) return this.value;
                  }
               }
            }, {
               title: {
                  text: <?php echo "'".__('Y2AXIS_LEGEND','highchart')."'"; ?>,
                  style: {
                     color: <?php echo "'".$color_temperature."'"; ?>
                  }
               },
               min: 0,
               max: <?php echo "$temp_axis"; ?>,
               startOnTick: false,
               showFirstLabel: false,
               opposite: true,
               labels: {
                  formatter: function() {
                     if(this.value<=100) return this.value;
                  }
               }
            }
            <?php if((isset($datap))&&(!empty($datap))) { ?>
            ,{
               title: {
                  text: <?php echo "'".__('Y3AXIS_LEGEND')."'"; ?>,
                  style: {
                     color: <?php echo "'".$color_power."'"; ?>
                  }
               },
               min: 0,
               max: <?php echo "$power_axis"; ?>,
            }
            <?php } ?>

         ],
         tooltip: {
            formatter: function() {
               var tab=new Array;
               <?php if("$type"=="month") { ?>
                  var val="<p align='left'><b><?php echo __('XAXIS_LEGEND_DAY'); ?>:  </b>"+Highcharts.dateFormat('%H:%M:%S %Y/%m/%d', this.x)+"</p>";
               <?php } else { ?>
                  var val="<p align='left'><b><?php echo __('XAXIS_LEGEND_DAY'); ?>:  </b>"+Highcharts.dateFormat('%H:%M:%S', this.x)+"</p>"; 
               <?php } ?>
                  var unit = {
                     <?php for($i=1;$i<=$GLOBALS['NB_MAX_SENSOR'];$i++) { 
                     echo "'".__('LEGEND_HUMI','highchart')." (".__('SENSOR')." ".$i.")': '%',";
                     echo "'".__('LEGEND_TEMP','highchart')." (".__('SENSOR')." ".$i.")': '°C',";
               } ?>
               <?php echo "'".__('LEGEND_POWER')."'"; ?>: 'W'
               <?php if((isset($select_plug))&&(!empty($select_plug))) {
                     echo ",'".$plugs_infos[$select_plug-1]["PLUG_NAME"]."': ''"; 
               } ?>
            }[this.series.name];
            if(unit=='') { 
               if(this.y==<?php echo $hygro_axis; ?>) {
                     behaviour='<?php echo __("VALUE_ON"); ?>';
               } else if(this.y==0){
                     behaviour='<?php echo __("VALUE_OFF"); ?>';
               } else {
                     behaviour=(this.y)*100/<?php echo $hygro_axis; ?>;
                     behaviour=behaviour.toFixed(1);
               }
                  <?php
                   $unity="";
                   if((isset($select_plug))&&(!empty($select_plug))) {
                        switch($plugs_infos[$select_plug-1]["PLUG_TYPE"]) {
                            case 'lamp': $unity="";
                                 break;
                            case 'unknown': $unity="";
                                break;
                            case 'ventilator': $unity="°C";
                                break;
                            case 'heating': $unity="°C";
                                break;
                            case 'humidifier': $unity="%";
                                break;
                            case 'deshumidifier': $unity="%";
                                break;
                        } 
               } ?>
               var unit="<?php echo $unity; ?>";
               return val+"<p align='left'><b>"+this.series.name+":</b>"+behaviour+unit+"</p>";
            } else {
               return val+"<p align='left'><b>"+this.series.name+":</b>"+this.y+unit+"</p>";
            }
          }
         },
         legend: {
            layout: 'horizontal',
            verticalAlign: 'bottom',
            navigation: {
                activeColor: '#3E576F',
                animation: true,
                arrowSize: 12,
                inactiveColor: '#CCC',
                style: {
                    fontWeight: 'bold',
                    color: '#333',
                    fontSize: '12px'    
                }
            }
         },
         credits: {
            enabled: false
         },
         plotOptions: {
            series: {
                events: {
                    legendItemClick: function () {
                        return false;
                    }
                }
            },
            area: {
               fillColor: {
                  linearGradient: { x1: 3, y1: 0, x2: 0, y2: 1}, 
                  stops: [
                      [0, Highcharts.getOptions().colors[0]],
                      [1, 'rgba(2,0,0,0)']
                  ]
               
               },
               lineWidth: 1,
               marker: {
                  enabled: false,
                  states: {
                      hover: {
                          enabled: true,
                          radius: 5
                      }
                  }
               },
               shadow: false,
               states: {
                  hover: {
                      lineWidth: 1
                  }
               }
            },
            spline: {
            lineWidth: 2,
            states: {
               hover: {
                  lineWidth: 5
               }
            },
            marker: {
               enabled: false,
               states: {
                  hover: {
                     enabled: true,
                     symbol: 'circle',
                     radius: 5,
                     lineWidth: 1
                  }
               }
            },
            pointInterval: 3600000, // one hour
            pointStart: Date.UTC(2009, 9, 6, 0, 0, 0)
         }
         },
         series: [
              <?php if((isset($select_sensor))&&(strcmp("$select_sensor","all")==0)) { $count=0; ?>
              <?php for($i=0;$i<$GLOBALS['NB_MAX_SENSOR'];$i++) { $nb=$i+1;  ?>
                <?php if($i>0) { echo ","; $count=$count+2; } ?>
              {
              type: 'area',
               showCheckbox: true,
               name: <?php echo "'".__('LEGEND_HUMI','highchart')." (".__('SENSOR')." ".$nb.")'"; ?>,
               pointInterval:  <?php echo "$next"; ?> * 60 * 1000,
               pointStart: Date.UTC(<?php echo $styear.",".$stmonth.",".$stday; ?>),
               <?php switch($color_humidity) {
                         case 'blue': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_BLUE'][$i]."',"; 
                            break;
                         case 'black': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_BLACK'][$i]."',"; 
                            break;
                        case 'green': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_GREEN'][$i]."',"; 
                            break;
                        case 'red': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_RED'][$i]."',"; 
                            break;
                        case 'purple': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_PURPLE'][$i]."',"; 
                            break;
                } ?>   
               selected: true,
               data: [
                  <?php if((isset($data_humi))&&(!empty($data_humi))) echo "$data_humi[$i]"; ?>
               ],
               events: {
                    checkboxClick: function(event) {
                        var series = chart.series[<?php echo $count; ?>];
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
            }, {
               type: 'area',
               showCheckbox: true,
               name: <?php echo "'".__('LEGEND_TEMP','highchart')." (".__('SENSOR')." ".$nb.")'"; ?>,
               pointInterval: <?php echo "$next"; ?> * 60 * 1000,
               pointStart: Date.UTC(<?php echo $styear.",".$stmonth.",".$stday; ?>),
                   <?php switch($color_temperature) {
                         case 'blue': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_BLUE'][$i]."',"; 
                            break;
                         case 'black': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_BLACK'][$i]."',"; 
                            break;
                        case 'green': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_GREEN'][$i]."',"; 
                            break;
                        case 'red': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_RED'][$i]."',"; 
                            break;
                        case 'purple': echo "color: '".$GLOBALS['LIST_GRAPHIC_COLOR_SENSOR_PURPLE'][$i]."',"; 
                            break;
                } ?>   
               yAxis: 1,
               selected: true,
               data: [
                  <?php if((isset($data_temp))&&(!empty($data_temp))) echo "$data_temp[$i]"; ?>
               ],
               events: {
                    checkboxClick: function(event) {
                        var series = chart.series[<?php echo $count+1; ?>];
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
              }
               <?php } ?>

                <?php if((isset($datap))&&(!empty($datap))) { ?>
                 , {
                  type: 'spline',
                  showCheckbox: true,
                  pointInterval:  <?php echo "$next"; ?> * 60 * 1000,
                  pointStart: Date.UTC(<?php echo $styear.",".$stmonth.",".$stday; ?>),
                  name: <?php echo "'".__('LEGEND_POWER')."'"; ?>,
                  yAxis: 2,
                  color: <?php echo "'".$color_power."'"; ?>,
                  selected: true,
                  data: [
                    <?php if((isset($datap))&&(!empty($datap))) echo "$datap"; ?>
                  ],
                  events: {
                    checkboxClick: function(event) {
                        var series = chart.series[<?php echo $count+2; ?>];
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
              }
               <?php } ?>

               <?php if((isset($data))&&(!empty($data))) { ?>
               , {
                  name: <?php echo "'".$plugs_infos[$select_plug-1]["PLUG_NAME"]."'"; ?>,
                  showCheckbox: true,
                  color: <?php echo "'".$GLOBALS["LIST_GRAPHIC_COLOR_PROGRAM"][$select_plug-1]."'"; ?>,
                  selected: true,
                  data: [
                    <?php if((isset($data))&&(!empty($data))) echo "$data"; ?>
                  ],
                  events: {
                    checkboxClick: function(event) {
                        <?php if((isset($datap))&&(!empty($datap))) { ?>
                        var series = chart.series[<?php echo $count+3; ?>];
                        <?php } else { ?>
                        var series = chart.series[<?php echo $count+2; ?>];
                        <?php } ?>
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
              }
            <?php } ?>


               <?php } else { ?>
               {
               type: 'area',
               showCheckbox: true,
               name: <?php echo "'".__('LEGEND_HUMI','highchart')." (".__('SENSOR')." ".$select_sensor.")'"; ?>,
               pointInterval:  <?php echo "$next"; ?> * 60 * 1000,
               pointStart: Date.UTC(<?php echo $styear.",".$stmonth.",".$stday; ?>),
               color: <?php echo "'".$color_humidity."'"; ?>,
               selected: true,
               data: [
                  <?php if((isset($data_humi))&&(!empty($data_humi))) echo "$data_humi"; ?>
               ],
               events: {
                    checkboxClick: function(event) {
                        var series = chart.series[0];
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
            }, {
               type: 'area',
               showCheckbox: true,
               name: <?php echo "'".__('LEGEND_TEMP','highchart')." (".__('SENSOR')." ".$select_sensor.")'"; ?>,
               pointInterval: <?php echo "$next"; ?> * 60 * 1000,
               pointStart: Date.UTC(<?php echo $styear.",".$stmonth.",".$stday; ?>),
               color: <?php echo "'".$color_temperature."'"; ?>,
               yAxis: 1,
               selected: true,
               data: [
                  <?php if((isset($data_temp))&&(!empty($data_temp))) echo "$data_temp"; ?>
               ],
               events: {
                    checkboxClick: function(event) {
                        var series = chart.series[1];
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
              }
              <?php if((isset($datap))&&(!empty($datap))) { ?>
               , {
                  type: 'spline',
                  showCheckbox: true,
                  pointInterval:  <?php echo "$next"; ?> * 60 * 1000,
                  pointStart: Date.UTC(<?php echo $styear.",".$stmonth.",".$stday; ?>),
                  name: <?php echo "'".__('LEGEND_POWER')."'"; ?>,
                  yAxis: 2,
                  color: <?php echo "'".$color_power."'"; ?>,
                  selected: true,
                  data: [
                    <?php if((isset($datap))&&(!empty($datap))) echo "$datap"; ?>
                  ],
                  events: {
                    checkboxClick: function(event) {
                        var series = chart.series[2];
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
              }
               <?php } ?>

               <?php if((isset($data))&&(!empty($data))) { ?>
               , {
                  name: <?php echo "'".$plugs_infos[$select_plug-1]["PLUG_NAME"]."'"; ?>,
                  showCheckbox: true,
                  color: <?php echo "'".$GLOBALS["LIST_GRAPHIC_COLOR_PROGRAM"][$select_plug-1]."'"; ?>,
                  selected: true,
                  data: [
                    <?php if((isset($data))&&(!empty($data))) echo "$data"; ?>
                  ],
                  events: {
                    checkboxClick: function(event) {
                        <?php if((isset($datap))&&(!empty($datap))) { ?>
                        var series = chart.series[3];
                        <?php } else { ?>
                        var series = chart.series[2];
                        <?php } ?>
                        if (series.visible) {
                            series.hide();
                        } else {
                            series.show();
                        }
                    }
               }
              }
               <?php } ?>
            <?php } ?>
         ]
        });
    });
    
});
</script>
<br /><br />
<table class="table_width">
<tr>
    <td class="left_log">
        <?php if((strcmp("$type","month")!=0)||(($GLOBALS['FIRST_LOG_YEAR']!=$startyear)||($startmonth!=01))) { ?>
        <form action="/cultibox/index.php/display-logs" method="post">
            <input type="submit" value="<" name="previous" class="button_log" title="<?php if(strcmp($type,"days")==0) echo __('PREVIOUS_BUTTON_DAY'); else echo __('PREVIOUS_BUTTON_MONTH'); ?>">
            <?php if(strcmp($type,"days")==0) { ?>
                <input type="hidden" name="startday" value="<?php echo date('Y-m-d',strtotime("-1 day", strtotime("$startday"))); ?>">
            <?php } else { ?>
                <?php 
                    if(strcmp("$startmonth","01")==0) {
                            $month="12"; 
                     } else {
                            $month=$startmonth-1;
                            if(strlen($month)<2) {
                                $month="0$month";
                            }
                    }
                ?>
                <input type="hidden" name="startmonth" value="<?php echo "$month"; ?>">
                <input type="hidden" name="startyear" value="<?php if(strcmp("$startmonth","01")==0) echo $startyear-1; else echo $startyear; ?>" >
            <?php } ?>

            <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
            <input type="hidden" name="select_power" value="<?php echo $select_power; ?>">
            <input type="hidden" name="select_sensor" value="<?php echo $select_sensor; ?>">
        </form>
        <?php } ?>
    </td>
    <td class="center_log"><div id="container" style="width: 800px; height: 400px; margin: 0 auto"></div></td>
    <td class="right_log">
        <?php 
             $dd=date('d');    
             $yy=date('Y');
             $mm=date('m');

          if(((strcmp("$type","month")==0)&&(($startyear!=date('Y'))||($startmonth!=12)))||((strcmp("$type","days")==0)&&(strcmp("$startday","$yy-$mm-$dd")!=0))) { 
        ?>
        <form action="/cultibox/index.php/display-logs" method="post">
            <input type="submit" value=">" name="next" class="button_log" title="<?php if(strcmp($type,"days")==0) echo __('NEXT_BUTTON_DAY'); else echo __('NEXT_BUTTON_MONTH'); ?>">
            <?php if(strcmp($type,"days")==0) { ?>
                <input type="hidden" name="startday" value="<?php echo date('Y-m-d',strtotime("+1 day", strtotime("$startday"))); ?>">
            <?php } else { ?>
                <?php 
                    if(strcmp("$startmonth","12")==0) {
                            $month="01"; 
                     } else {
                            $month=$startmonth+1;
                            if(strlen($month)<2) {
                                $month="0$month";
                            }
                    }
                ?>
                <input type="hidden" name="startmonth" value="<?php echo "$month"; ?>">
                <input type="hidden" name="startyear" value="<?php if(strcmp("$startmonth","12")==0) echo $startyear+1; else echo $startyear; ?>" >
            <?php } ?>

            <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
            <input type="hidden" name="select_power" value="<?php echo $select_power; ?>">
            <input type="hidden" name="select_sensor" value="<?php echo $select_sensor; ?>">
        </form>
        <?php } ?>
    </td>
</tr>
</table>

<?php } ?>
<p class="precision_infos">
<?php if(strcmp($type,"days")==0)  echo "*"." ".__('PRECISION_GRAPH_DAY'); else echo "*"." ".__('PRECISION_GRAPH_MONTH'); ?>
</p>
<hr />
<br />

<label class="title_conf"><img src="main/libs/img/arrow.png" alt="" /><?php echo __('MANAGE_LOG_INFOS'); ?>:</label>
<form action="/cultibox/index.php/display-logs" method="post" >
<table class="table_width">
<tr>
    <td class="log-manage-marge"></td>
    <td class="log-manage-title"><?php echo __('IMPORT_LOG_TITLE')." ".$log_search." ".__('IMPORT_LAST_MONTH'); ?></td>
    <td class="log-manage-field"><INPUT type="submit" id="import_log" name="import_log" value="<?php echo __('IMPORT_LOG'); ?>"></td>
</tr>
</table>
<input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
<input type="hidden" name="select_power" value="<?php echo $select_power; ?>">
<input type="hidden" name="select_sensor" value="<?php echo $select_sensor; ?>">
<?php if(strcmp("$type","month")==0) { ?>
<input type="hidden" name="startmonth" value="<?php echo "$startmonth"; ?>">
<input type="hidden" name="startyear" value="<?php echo "$startyear"; ?>" >
<?php } else { ?>
<input type="hidden" name="startday" value="<?php echo "$startday"; ?>">
<?php } ?>
</form>


<form action="/cultibox/index.php/display-logs" method="post" >
<table class="table_width">
<tr>
    <td class="log-manage-marge"></td>
    <td class="log-manage-title"><?php echo __('MANAGE_RESET_TITLE'); ?></td>
    <td class="log-manage-field"><INPUT type="submit" id="reset_log" name="reset_log" value="<?php echo __('MANAGE_RESET'); ?>" onclick="return DeleteForm('<?php echo __('RESET_CONFIRM','javascript'); ?>')"></td>
</tr>
</table>
<input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
<input type="hidden" name="select_power" value="<?php echo $select_power; ?>">
<input type="hidden" name="select_sensor" value="<?php echo $select_sensor; ?>">
<?php if(strcmp("$type","month")==0) { ?>
<input type="hidden" name="startmonth" value="<?php echo "$startmonth"; ?>">
<input type="hidden" name="startyear" value="<?php echo "$startyear"; ?>" >
<?php } else { ?>
<input type="hidden" name="startday" value="<?php echo "$startday"; ?>">
<?php } ?>
</form>


<form action="/cultibox/index.php/display-logs" method="post" >
<table class="table_width">
<tr>
    <td class="log-manage-marge"></td>
    <td class="log-manage-title"><?php echo __('MANAGE_RESET_TITLE_POWER'); ?></td>
    <td class="log-manage-field"><INPUT type="submit" id="reset_log_power" name="reset_log_power" value="<?php echo __('MANAGE_RESET'); ?>" onclick="return DeleteForm()"></td>
</tr>
</table>
<input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
<input type="hidden" name="select_power" value="<?php echo $select_power; ?>">
<input type="hidden" name="select_sensor" value="<?php echo $select_sensor; ?>">
<?php if(strcmp("$type","month")==0) { ?>
<input type="hidden" name="startmonth" value="<?php echo "$startmonth"; ?>">
<input type="hidden" name="startyear" value="<?php echo "$startyear"; ?>" >
<?php } else { ?>
<input type="hidden" name="startday" value="<?php echo "$startday"; ?>">
<?php } ?>
</form>
